# Copyright 2024 Aleksandr Bocharov
# Distributed under the Boost Software License, Version 1.0.
# See accompanying file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt
# 2024-09-29
# https://github.com/Aleksandr3Bocharov/RefalAB

#############################################################################
# Makefile
#       Makefile for building RefalAB system
#       for UNIX ( FreeBSD, Linux )
#############################################################################

MAKE	=	make

all:

# PHASE I:
# Make the compiler from RefalAB language, 
# result bin/RefalAB executable module.
# result bin/RefalAB_dbg executable module (debug mode).

	mkdir -p bin
	$(MAKE) -f src/comp/comp_linux.mak
	src/comp/delbin
	$(MAKE) -f src/comp/comp_dbg_linux.mak
	src/comp/delbin
	
# PHASE II:
# Make the interpreter from "jazyk sborki",  
# result lib/libRefalAB.a - set of object modules.
# result lib/libRefalAB_dbg.a - set of object modules (debug mode).
# result lib/mainrf.o lib/rfdbg.o

	mkdir -p lib
	$(MAKE) -f src/inter/inter_lib_linux.mak
	src/inter/delbin
	$(MAKE) -f src/inter/inter_lib_dbg_linux.mak
	src/inter/delbin
	$(MAKE) -f src/inter/inter_o_linux.mak
	src/inter/copy_obj
	src/inter/delbin

#### end of Makefile

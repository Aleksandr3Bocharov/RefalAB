## 2. Описание библиотеки

<div id="toc"></div>
<script src="toc.js"></script>
<script>
makeTOC.localizedHeader = "Содержание"
makeTOC.localizedShow = "Показать";
makeTOC.localizedHide = "Скрыть";
</script>

### Введение

В состав языка программирования РефалАБ входит набор функций и спецификаторов,
которые могут быть использованы в РефалАБ-программах в качестве внешних.
Эти функции и спецификаторы хранятся в библиотеке объектных модулей,
входящей в состав РефалАБ-системы. 

Чтобы использовать любую из этих функций или спецификаторов в программе,
написанной на РефалАБ, необходимо объявить ее внешней в соответствующем модуле
с помощью директивы EXTRN.

Часть библиотечных функций, библиотечные пустые функции и спецификаторы написаны
на РефалАБ. Остальные библиотечные функции реализованы на языке Си
и являются первичными.

### 2.1. Функции ввода-вывода

Функции ввода-вывода предназначены для организации простейшего
диалогового взаимодействия между пользователем и программой.
Такими функциями являются:
- [card](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-card) (для ввода строк с клавиатуры);
- [print](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-print) (для вывода информации на экран дисплея);
- [prout](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-prout) (для вывода информации на экран дисплея);
- [printm](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-printm) (для вывода информации на экран дисплея);
- [proutm](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-proutm) (для вывода информации на экран дисплея).

Функции print, prout, printm и proutm различаются возвращаемым в
поле зрения значением и способом представления информации на экране.

Ввод и вывод может быть переназначен в произвольный файл средствами
операционной ы.

### 2.2. Функции арифметики

Функции арифметики работают с целыми числами. Целое число - это
последовательность макроцифр (т.е. "цифр" в позиционной е
счисления по основанию 2^24), которой может предшествовать символ знака.
Примерами целых чисел являются:

    '+' /14/
    /545/
    '-' /8/
    /1//0/ - значение этого числа равно 2^24=16777216
    '-'/3//2035/ - значение этого числа равно -50333683
    /0/

Целое число нуль представляется либо нулевой макроцифрой /0/, либо
пустым выражением.

Все функции арифметики, кроме p1 и m1, допускают использование пустого выражения в
качестве аргумента и воспринимают его как нуль. При этом, некоторые функции выдают
нулевой результат работы в виде макроцифры /0/, а некоторые - в виде пустого выражения,
т.к. в некоторых случаях это удобно.

К функциям арифметики относятся:
- [add](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-add) (сложение);
- [addn](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-addn) (альтернативное сложение);
- [mul](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-mul) (умножение);
- [muln](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-muln) (альтернативное умножение);
- [sub](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-sub) (вычитание);
- [subn](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-subn) (альтернативное вычитание);
- [dr](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-dr) (деление нацело с остатком);
- [drn](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-drn) (альтернативное деление нацело с остатком);
- [div](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-div) (деление нацело);
- [divn](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-divn) (альтернативное деление нацело);
- [gcd](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-gcd) (вычисление наибольшего общего делителя);
- [p1](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-p1) (прибавление единицы);
- [m1](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-m1) (вычитание единицы);
- [nrel](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-nrel) (сравнение целых чисел).

Для преобразования целых чисел в символьный вид и обратно используются
следующие функции:
- [symb](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-symb) (целое, не превышающее по абсолютной величине 2147483647 - в символьный вид);
- [Cvd](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-cvd) (целое любой длины - в символьный вид);
- [numb](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-numb) (последовательность символов - в целое, не превышающее по абсолютной величине 2147483647);
- [Cvb](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-cvb) (последовательность символов - в целое любой длины).

### 2.3. Функции и спецификаторы лексического анализа

Стандартная библиотека РефалАБ содержит ряд функций, полезных при
выполнении лексического анализа в трансляторах, ах естественноязыкового
общения, языковых конверторах и т.д. Такими функциями являются:
- [lrel](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-lrel) (предназначена для лексикографического сравнения двух выражений);
- [first](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-first) (предназначена для отщепления от начала выражения части,
имеющей указанную длину);
- [last](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-last) (предназначена для отщепления от конца выражения части,
имеющей указанную длину);
- [lengw](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8-lengw) (вычисляет длину аргумента, измеренную в термах, т.е. количество
термов нулевого уровня, составляющих аргумент);
- [lengr](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-lengr) (вычисляет реальную длину аргумента, т.е. количество символов
и скобок, составляющих аргумент);
- [multe](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-multe) (копирует (размножает) аргумент в заданном количестве экземпляров);
- [Exist](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-exist) (определяет существование терма в выражении на нулевом уровне);
- [Set](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-set) (формирует множество термов нулевого уровня аргумента);
- [Is_White_Space](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-is_white_space) (определяет принадлежность символа к пробелам);
- [Trim](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-trim) (удаляет пробелы в начале и в конце аргумента);
- [TrimL](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-triml) (удаляет пробелы в начале аргумента);
- [TrimR](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-trimr) (удаляет пробелы в конце аргумента).

Также в библиотеке есть спецификатор [White_Spaces](R_2.md#%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80-white_spaces) - множество пробелов.

### 2.4. Функции для работы с символьными файлами

Описываемые в этом разделе функции позволяют работать не более чем
с десятью файлами одновременно. При этом пять файлов доступны только на
чтение (они именуются "файлами чтения") и пять файлов - только на запись или дозапись
(они именуются "файлами записи").

К этим функциям относятся следующие функции:
- [fopen](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-fopen) (открыть файл);
- [Load_File](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-load_file) (загрузить файл);
- [Save_File](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-save_file) (сохранить файл);
- [Append_File](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-append_file) (добавить в файл);
- [fgets](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-fgets) (читать файл);
- [fputs](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-fputs) (записать в файл);
- [fclose](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-fclose) (закрыть файл).

Функции fopen, Load_File, Save_File, Append_File связывают с заданным именем файла определенный номер
(число от 0 до 4). Для выполнения какой-либо операции с
файлом с помощью функций fgets, fputs, fclose следует указывать
его номер, помещая соответствующую макроцифру в аргументе.

Также работа с файлами производится с помощью следующих первичных функций:
- [rename](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-rename) (переименовать/переместить файл);
- [remove_file](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-remove_file) (удалить файл).

### 2.5. Функция порождения процесса

Функция [try](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-try) позволяет писать программы, анализирующие аварийные
ситуации типа "Отождествление невозможно" или "Свободная память исчерпана"
и предпринимающие некоторые дальнейшие действия по обработке таких ситуаций.

Функция try порождает новое поле зрения, помещает в него функциональный терм,
определенный в ее аргументе, и пытается вычислить его.
Результат такой попытки возвращается в то поле зрения, из которого была
вызвана try.

После того, как результат замены сформирован, дополнительное поле
зрения, созданное в результате обращения к try, уничтожается.

Можно обращаться к try рекурсивно. В этом случае образуется стек
из полей зрения, однако глубина рекурсии ограничена. Увеличив размер
данного стека, можно увеличить глубину вложенности try.

### 2.6. Функции для работы с символами-метками

В некоторых случаях возникает необходимость превратить цепочку объектных символов
в символ-метку или, наоборот, получить из символа-метки цепочку объектных
символов, составляющих его тело. Например, из цепочки символов 'ABCDE'
построить символ /ABCDE/ или символ-метку /label/ превратить в цепочку
'LABEL'. При этом должно выполняться следующее требование: если мы будем
превращать одну и ту же цепочку символов в символ-метку несколько раз,
то все созданные символы-метки должны быть равны друг другу,
т.е. являться экземплярами одного и того же символа.

Для создания символов-меток и обратного превращения их в цепочки
объектных символов используются функции ftochar, chartof и functab:
- [ftochar](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-ftochar) (превращает символ-метку в цепочку символов, которая
является телом символа-метки);
- [chartof](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-chartof) (превращает цепочку символов в символ-метку, имеющий тело,
совпадающее с заданной цепочкой символов, при этом одна и та же
цепочка символов превращается в один и тот же символ-метку, т.е.
не создается новый экземпляр символа-метки - это достигается за
счет того, что функция создает и поддерживает таблицу символов-меток,
порожденных ею из цепочек символов);
- [functab](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-functab) (регистрирует в таблице символов, создаваемой функцией
chartof, указанный символ-метку - это требуется делать, если необходимо,
чтобы символ-метка, создаваемый из цепочки символов, заведомо совпадал
с символом-меткой, определенным в РефалАБ-программе.

### 2.7. Функции для работы с копилкой

Библиотека РефалАБ содержит пять первичных функций для работы с копилкой:
- [br](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-%D0%B2r-%D0%B7%D0%B0%D0%BA%D0%BE%D0%BF%D0%B0%D1%82%D1%8C) (закопать);
- [dg](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-dg-%D0%B2%D1%8B%D0%BA%D0%BE%D0%BF%D0%B0%D1%82%D1%8C) (выкопать);
- [cp](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-%D1%81%D1%80-%D1%81%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C) (скопировать);
- [rp](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-r%D1%80-%D0%B7%D0%B0%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C) (заменить);
- [dgall](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-dg%D0%B0ll-%D0%B2%D1%8B%D0%BA%D0%BE%D0%BF%D0%B0%D1%82%D1%8C-%D0%B2%D1%81%D0%B5) (выкопать все).

Подробное описание копилки и операций для работы с ней представлено
в 1 разделе.

### 2.8. Функции для работы со статическими и динамическими ящиками

Средством РефалАБ, дающим возможность обрабатывать произвольные графы,
являются статические и динамические ящики.

Библиотека РефалАБ содержит шесть первичных функций для работы с ящиками:
- [new](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-new) (создать новый ящик);
- [gtr](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-gtr-%D0%B2%D0%B7%D1%8F%D1%82%D1%8C-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5) (извлечь из ящика);
- [rdr](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-rdr-%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5) (считать (скопировать) из ящика);
- [wtr](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-wtr-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5) (занести в ящик);
- [ptr](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-ptr-%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D1%8C-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5) (добавить в ящик);
- [swr](R_1.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-swr-%D0%BE%D0%B1%D0%BC%D0%B5%D0%BD%D1%8F%D1%82%D1%8C-%D0%BF%D0%BE-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B5) (обменять с содержимым ящика).

Подробное описание этих функций представлено в 1 разделе.

### 2.9. Функции для работы со временем

Библиотека содержит ряд функций для работы со временем:
- [time](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-time) (возвращает текущую дату и время в локали операционной системы);
- [tm](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-tm) (запуск и возвращение текущего времени секундомера).

### 2.10. Функция удаления функциональных термов в поле зрения

Функция [delf](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-delf) позволяет писать программы, анализирующие поле зрения и
удаляющие из него определенные функциональные термы.

Функция delf изменяет поле зрения, удаляя из него функциональные термы,
находящиеся в определенной цепочке, являющаяся частью последовательности
становления ведущими функциональных термов. Начало цепочки - функциональный терм,
который станет ведущим после ведущего функционального терма, т.е. после вызова функции delf.
Конец цепочки - функциональный терм, за которым следует сразу символ '#'.
Также удаляется символ '#'.

### 2.11. Функции высшего порядка

В РефалАБ можно создавать функции высшего порядка, т.е. функции, содержащие в аргументе функции
либо в виде символов-меток, либо в виде частично-примененных функций в форме струтктурных термов

    (функция выражение)

где функция - символ-метка или частично-примененная функция.

Примерами функций, передаваемых в функции высшего порядка являются:

    /add/
    (/add/ (/2/))
    (/xopen/ 'r')
    (/xopen/ 'r' /0/)
    ((/xopen/ 'r') /0/)

Библиотека РефалАБ содержит следующие функции высшего порядка:
- [Apply](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-apply) (вызывает функцию, т.е. применяет функцию к аргументу функции);
- [Map](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-map) (применяет последовательно функцию ко всем термам нулевого уровня выражения);
- [FoldL](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-foldl) (левая свертка выражения);
- [FoldR](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-foldr) (правая свертка выражения);
- [Map_Accumulator](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-map_accumulator) (гибрид функций Map и FoldL).

Также в библиотеке есть обычная функция [Del_Accumulator](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-del_accumulator) - вспомогательная
функция для функции Map_Accumulator (удаляет аккумулятор из возвращаемого выражения
функции Map_Accumulator).

### 2.12. Функции и спецификаторы, специфичные для сред Windows и POSIX

В библиотеке есть функции и спецификаторы, специфичные для сред Windows и POSIX.
Т.е. возвращаемые выражения этих функций и множества спецификаторов различны для
сред Windows и POSIX. Они применяются для написания программ, по разному ведущих себя
в средах Windows и POSIX.

Такими функциями являются:
- [Platform](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-platform) (возвращает текущую среду Windows или POSIX);
- [Directory_Separator](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-directory_separator) (возвращает основной символ для разделения уровней папок в строке пути в текущей среде);
- [Is_Directory_Separator](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-is_directory_separator) (определяет принадлежность символа к символам для разделения
уровней папок в строке пути в текущей среде);
- [Path_Separator](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-path_separator) (возвращает символ разделения каталогов в переменной окружения PATH в текущей среде).

Специфичным спецификатором является [Directory_Separators](R_2.md#%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80-directory_separators) - множество символов для разделения уровней папок в строке пути в текущей среде.

### 2.13. Системные функции

В библиотеке РефалАБ присутствуют следующие системные функции:
- [arg](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-arg) (получение аргументов командной строки);
- [system](R_2.md#%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-system) (выполнение команды операционной системы);
- [exit] (выход с определенным кодом).

### 2.14. Пустые функции

В библиотеке РефалАБ присутствуют следующие пустые функции:
- [True](R_2.md#%D0%BF%D1%83%D1%81%D1%82%D0%B0%D1%8F-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-true) (логическая иситина);
- [False](R_2.md#%D0%BF%D1%83%D1%81%D1%82%D0%B0%D1%8F-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-false) (логическая ложь);
- [Windows](R_2.md#%D0%BF%D1%83%D1%81%D1%82%D0%B0%D1%8F-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-windows) (функция Platform возвращает эту функцию в среде Windows,
применяется совместно с Platform и пустой функцией POSIX для написания
программ, по разному ведущих себя в средах Windows и POSIX);
- [POSIX](R_2.md#%D0%BF%D1%83%D1%81%D1%82%D0%B0%D1%8F-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F-posix) (функция Platform возвращает эту функцию в среде POSIX,
применяется совместно с Platform и пустой функцией Windows для написания
программ, по разному ведущих себя в средах Windows и POSIX).

### 2.15. Описание функций

Здесь представлены описания функций, расположенных в алфавитном порядке.
Для каждой функции приводится формат вызова (передаваемые аргументы), описание,
возвращаемое значение и пример вызова функции в формате

    <вызов функции> --> <результат замены>

#### Функция add

ВЫЗОВ:

    <add (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция add предназначена для сложения двух целых чисел E1 и E2.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Результатом вызова функции add является целое число (сложение E1 и E2).
Если результат положительный, то знак '+' не ставитcя. Нулевой результат
выдается в виде макроцифры /0/.

ПРИМЕРЫ:

    <add (/1/) /2/> --> /3/
    <add ( ) /2/> --> /2/
    <add (/16777215/) /2/> --> /1//1/

#### Функция addn

ВЫЗОВ:

    <addn (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Отличается от add только тем, что выдает нулевой результат
в виде пустого выражения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Как в add, только нулевой результат выдается
в виде пустого выражения.

ПРИМЕР:

    <addn () > -->

#### Функция Append_File

ВЫЗОВ:

    <Append_File Sn (Ef) Ee>

где Sn - номер файла (макроцифра от /0/ до /4/),
Ef - выражение из символов-литер, представляющее собой имя файла
(возможно с указанием пути) и ограничено 254 символами,
Ee - выражение (может быть пустым) вида (E1)...(En), E1...En содержат
только символы-литеры и структурные скобки.

ОПИСАНИЕ:

Эта функция открывает файл на дозапись в уже существующий файл.
Если файл не существует, то файл будет создан, и в него будет
осуществляться обычная запись с самого начала. Далее функция записывает
в конец файла строки E1...En. При этом все структурные скобки в этих выраженииях
преобразуются в символы-литеры '(' и ')'. Ели любое из этих выражений пусто,
в файл добавляется пустая строка. Если Ee - пусто,
то в файл ничего не записывается. В конце работы функция закрывает файл.
Неудачная попытка открытия файла приводит к авосту
"Отождествление невозможно" и выдаче сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

    <Append_File /3/ ('input.txt') ('next string') ('last string')> -->
    и в конец файла допишутся строки 'next string' и 'last string'
    
#### Функция Apply

ВЫЗОВ:

    <Apply Wc Ee>

где Wc - терм, являющийся функцией, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция высшего порядка вызывает функцию, т.е. применяет функцию Wc
к аргументу функции Ee. Если Wc - символ-метка, то функция
вызывается так < Wc Ee>. Если Wc - частично-примененная функция
(Wp Eb), то происходит применение функции Wp к аргументу EbEe.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение, являющееся результатом применения функции Wc
к аргументу функции Ee.

ПРИМЕРЫ:

    <Apply /add/ (/2/) /1/> --> /3/
    <Apply (/add/ (/2/)) /1/> --> /3/

#### Функция arg

ВЫЗОВ:

    <arg Sn>

где Sn - номер аргумента командной строки в виде макроцифры.

ОПИСАНИЕ:

Функция arg возвращает аргумент командной строки с номером Sn.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Er - выражение из объектных символов, представляющее аргумент
с номером Sn командной строки. Нумерация аргументов идет с единицы.
Если Sn = 0, то аргумент есть имя программы.
Если Sn больше количества аргументов, то Er - пустое выражение.

ПРИМЕР:

    Запуск рефал-программы из командной строки Windows: test -d
    <arg /0/ > --> 'test.exe'
    <arg /1/> --> '-d'
    <arg /2/> -->

#### Функция card

ВЫЗОВ:

    <card Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция card дает возможность читать записи из стандартного
входного потока. Обычно в качестве входного потока назначается ввод с
клавиатуры, но он может быть переназначен в файл при запуске программы
(в этом случае необходимо следить за соответствием количества вызовов
функции card и количества записей в файле, если записей меньше,
чем вызовов, возможны непредсказуемые результаты).

Вначале работы функция выводит выражение Ee в стандартный выходной поток,
как-будто она вызывает функцию

    <prout Ee>

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

После вызова функции card программа переходит в состояние ожидания
ввода строки. По окончании ввода (нажатии клавиши "Enter") введенная
строка и будет возвращаемым значением. Если в процессе ввода функция
обнаружила в потоке EOF, то функция завершает работу и последний символ
в возвращаемом выражении будет макроцифра /0/.

ПРИМЕР:

    <card > --> 'эта строка введена с клавиатуры'

#### Функция chartof

ВЫЗОВ:

    <chartof Vc>

где Vc - непустая цепочка объектных символов.

ОПИСАНИЕ:

Функция chartof превращает цепочку литер в символ-метку, имеющий
тело, совпадающее с заданной цепочкой литер. Цепочка литер обязанна быть непустой,
количество литер не превышать 255, литеры могут быть любыми. Функция chartof создает и
поддерживает таблицу символов-меток, порожденных ею из цепочек литер.
Если цепочка литер встретилась в первый раз, то создается пустая функция,
имя которой является соответствующим символом-меткой. Если такая же
цепочка литер встречается еще раз, то новая функция не создается, а в
качестве результата вырабатывается имя ранее созданной функции.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: символ-метка

ПРИМЕРЫ:

    <chartof '$assA3434^&'> --> /$ASSA3434^&/
    <chartof 'ABCD'> --> /ABCD/

#### Функция Cvb

ВЫЗОВ: 

    <cvb Ed>

где Ed - цепочка символов-литер произвольной длины, являющаяся
десятичной записью целого числа со знаком или без него.
Пустое выражение эквивалентно нулю.

ОПИСАНИЕ:

Преобразует целое число Ed из символьного представления в цепочку
макроцифр.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

En - число в виде цепочки макроцифр.
Если результат положителен - знак '+' не ставитcя.
Нулевой результат выдается в виде макроцифры /0/.

ПРИМЕРЫ:

    <cvb > --> /0/
    <cvb '+025'> --> /25/
    <cvb '1000000000'> --> /59//10144256/

#### Функция Cvd

ВЫЗОВ: 


    <cvd En>

где En - целое число в виде цепочки макроцифр (возможно, со знаком) (может быть пустое).

ОПИСАНИЕ:

Преобразует целое число в символьное представление.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Ed - цепочка символов-литер, являющаяся записью числа En
в десятичной системе счисления. Если число En положительно -
знак '+' в Ed не ставитcя. Нулевой результат изображается как '0'.

ПРИМЕРЫ:

    <cvd '-'/59//10144256/> --> '-1000000000'
    <cvd > --> '0'
    <cvd /0/> --> '0'


#### Функция Del_Accumulator

ВЫЗОВ:

    <Del_Accumulator Wa Ee>

где Wa - терм, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция Del_Accumulator - вспомогательная функция для функции Map_Accumulator
(удаляет аккумулятор Wa из возвращаемого выражения WaEe функции Map_Accumulator).

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Ee

ПРИМЕРЫ:

    <Del_Accumulator (/1/)> -->
    <Del_Accumulator (/1//6/) (/1/)(/3/)> --> (/1/)(/3/)

#### Функция delf

ВЫЗОВ:

    <delf>

ОПИСАНИЕ:

Функция delf изменяет поле зрения, удаляя из него функциональные термы,
находящиеся в определенной цепочке, являющаяся частью последовательности
становления ведущими функциональных термов. Начало цепочки - функциональный терм,
который станет ведущим после ведущего функционального терма, т.е. после вызова
функции delf. Конец цепочки - функциональный терм, за которым следует сразу
символ '#'. Также удаляется символ '#'. Если функция не находит символ '#',
происходит аварийное завершение программы с выдачой сообщения "sign '#' missing".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕРЫ:

    поле зрения: 'Hello World!'</DELF/></PRINT/'delf1'></PRINT/'delf2'>'#'</PRINT/'delf'>
    <delf> -->
    поле зрения: 'Hello World!'</PRINT/'delf'>
    
    поле зрения: 'Hello World!'</DELF/></PRINT/'delf1'</PRINT/'delf2'>'ok'</PRINT/'delf3'>'#delf'>
    <delf> -->
    поле зрения: 'Hello World!'</PRINT/'delf1okdelf'>

#### Функция Directory_Separator

ВЫЗОВ:

    <Directory_Separator>

ОПИСАНИЕ:

Функция Directory_Separator возвращает основной символ
для разделения уровней папок в строке пути
в текущей среде.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Sd

где Sd - символ-литера:
- Sd = '\\\\', если среда Windows;
- Sd = '/', если среда POSIX.

ПРИМЕРЫ:

    Среда Windows
    <Directory_Separator> --> '\\'

    Среда POSIX
    <Directory_Separator> --> '/'

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения.

#### Функция div

ВЫЗОВ:

    <div ( E1 ) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция div предназначена для целочисленного деления числа E1 на
число E2. Попытка делить на ноль приводит к авосту
"Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Целое число, представляющее собой неокругленное частное от деления
E1 на E2. Если результат положителен - знак '+' не ставитcя.
Нулевой результат выдается в виде макроцифры /0/.

ПРИМЕРЫ:

    <div (/5/) /3/> --> /1/
    <div (/5/) '-'/3/> --> '-'/1/
    <div ('-'/5/) /3/> --> '-'/1/
    <div ('-'/5/) '-'/3/> --> /1/

#### Функция divn

ВЫЗОВ:

    <divn ( E1 ) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Отличается от div только тем, что выдает нулевой результат
в виде пустого выражения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Как в div, только нулевой результат выдается
в виде пустого выражения.

ПРИМЕР:

    <divn () /3/> -->

#### Функция dr

ВЫЗОВ:

    <dr ( E1 ) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция dr предназначена для целочисленного деления
с остатком числа E1 на число E2. Попытка делить на ноль
приводит к авосту "Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Eq (Er)

где Eq (целое число) - частное от деления E1 на E2 , а Er (целое
число) - остаток. И частное, и остаток выдаются без незначащих нулей и
без знака '+'. Нулевые Eq и Er выдаются в виде макроцифры /0/.
Знаки чисел учитываются следующим образом: сначала производим деление,
не обращая внимания на знаки, а затем частному и остатку приписываем
такие знаки, чтобы выполнялось соотношение:

    E1 = Eq * E2 + Er

т.е. частное положительно, если знаки делимого и делителя совпадают, и
отрицательно в противном случае, а не равный нулю остаток всегда имеет
знак делимого.

ПРИМЕРЫ:

    <dr (/5/) /3/> --> /1/ (/2/)
    <dr (/5/) '-'/3/ > --> '-'/1/ (/2/)
    <dr ('-'/5/) /3/> --> '-'/1/ ('-'/2/)
    <dr ('-'/5/) '-'/3/> --> /1/ ('-'/2/)

#### Функция drn

ВЫЗОВ:

    <drn ( E1 ) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Отличается от dr только тем, что выдает нулевой результат
в виде пустого выражения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Как в dr, только нулевой результат выдается
в виде пустого выражения.

ПРИМЕРЫ:

    <drn (/10/) /5/> --> /2/ ()
    <drn () /3/> --> ()

#### Функция Exist

ВЫЗОВ:

    <Exist Ws Ee>

где Ws - терм, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция Exist проверяет, существует ли терм Ws
в выражении Ee на нулевом уровне.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: St

где St - символ-метка:
- St = /TRUE/, если терм Ws существует
в выражении Ee на нулевом уровне;
- St = /FALSE/, иначе.

ПРИМЕРЫ:

    <Exist 's' 's'> --> /TRUE/
    <Exist 's' 'r'> --> /FALSE/

#### Функция fclose

ВЫЗОВ:

    <fclose Sz Sn>

где Sz - символ-литера, Sn - номер файла (макроцифра от /0/ до /4/).

Если Sz - 'R' или 'r', то закрывается "файл чтения".

Если Sz - 'W' или 'w', то закрывается "файл записи".

ОПИСАНИЕ:

Эта функция закрывает "файл чтения" с заданным номером
или закрывает "файл записи" с заданным номером.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕРЫ:

    <fclose 'r'/3/> -->
    <fclose 'w'/0/> -->

#### Функция fgets

ВЫЗОВ:

    <fgets Sn>

где Sn - номер файла (макроцифра от /0/ до /4/).

ОПИСАНИЕ:

Функция fgets читает очередную строку из предварительно открытого
с помощью функции fopen "файла чтения" с заданным номером.
Если файл не открыт, то открывается на чтение файл "REFALX.DAT", где
X - число Sn. Неудачная попытка открытия этого файла приводит к авосту
"Отождествление невозможно" и выдаче сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Er - очередная строка из "файла чтения" в виде выражения объектных символов.
Если в процессе чтения строки функция обнаружила EOF или символ '\032',
то функция завершает работу и последний символ
в возвращаемом выражении будет макроцифра /0/.

ПРИМЕРЫ:

    <fgets /3/> --> 'это очередная прочитанная строка'
    <fgets /3/> --> 'это следующая строка из того же файла'

#### Функция first

ВЫЗОВ:

    <first Nn Ee>

где Nn - макроцифра, а Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция предназначена для отщепления от начала выражения Ee части,
имеющей указанную длину Nn в термах нулевого уровня.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Если Ee представляет собой последовательность из менее,
чем Nn термов, результатом замены является выражение:

    '*' Ee

Если же длина Ee не меньше, чем Nn термов, результатом замены является

    (E1) E2

где E1 и E2 - такие выражения, что Ee = E1E2, и при этом E1 является
последовательностью ровно из Nn термов.

ПРИМЕРЫ:

    <first /2/ 'A'('B')'C'> --> ('A'('B')) 'C'
    <first /5/ 'A'('B')'C'> --> '*A'('B')'C'

#### Функция FoldL

ВЫЗОВ:

    <FoldL Wc Wa Ee>

где Wc - терм, являющийся функцией, Wa - терм, являющийся начальным
значением аккумулятора, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция высшего порядка производит левую свертку, т.е., если Ee не пусто,
последовательно применяет функцию Wc к терму, являющимся текущим значением аккумулятора,
начиная с начального, и к текущему терму нулевого уровня выражения Ee,
начиная с первого. Результат этого применения - терм Wi, i=1...n (n - количество
термов нулевого уровня выражения Ee), который становится новым текущим
значением аккумулятора. Результат функции - Wn.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Wr

где Wr - терм:
- Wr = Wa, если Ee - пусто;
- Wr = Wn.

ПРИМЕРЫ:

    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>)
    <FoldL /Add1/ (/1/)> --> (/1/)
    
    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>)
    <FoldL /Add1/ (/1/) (/2/) (/1//3/)> --> (/1//6/)

#### Функция FoldR

ВЫЗОВ:

    <FoldR Wc Ee Wa>

где Wc - терм, являющийся функцией, Ee - произвольное объектное выражение,
Wa - терм, являющийся начальным значением аккумулятора.

ОПИСАНИЕ:

Эта функция высшего порядка производит правую свертку, т.е., если Ee не пусто,
последовательно применяет функцию Wc к текущему терму нулевого уровня выражения Ee,
начиная с последнего в обратном порядке, и к терму, являющимся текущим значением аккумулятора,
начиная с начального. Результат этого применения - терм Wi, i=1...n (n - количество
термов нулевого уровня выражения Ee), который становится новым текущим
значением аккумулятора. Результат функции - Wn.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Wr

где Wr - терм:
- Wr = Wa, если Ee - пусто;
- Wr = Wn.

ПРИМЕРЫ:

    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>)
    <FoldR /Add1/ (/1/)> --> (/1/)
    
    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>)
    <FoldR /Add1/ (/2/) (/1//3/) (/1/)> --> (/1//6/)

#### Функция fopen

ВЫЗОВ:

    <fopen Sz Sn Ef>

где Sz - символ-литера, Sn - номер файла (макроцифра от /0/ до /4/),
Ef - выражение из символов-литер, представляющее собой имя файла
(возможно с указанием пути) и ограничено 254 символами.

Если Sz - 'R' или 'r', то файл открывается на чтение.

Если Sz - 'W' или 'w', то файл открывается на запись. Если файл существует,
то файл будет перезаписан. Если файл не существует, то файл будет
создан.

Если Sz - 'A' или 'a', то файл открывается на дозапись
в уже существующий файл. Если файл не существует, то файл будет
создан, и в него будет осуществляться обычная запись с самого начала.

ОПИСАНИЕ:

Эта функция открывает файл на чтение и связывает с ним заданный номер
"файла чтения" или на запись (или дозапись) и связывает с ним заданный номер
"файла записи". Неудачная попытка открытия файла приводит к авосту
"Отождествление невозможно" и выдаче сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕРЫ:

    <fopen 'r'/3/'input.txt'> -->
    <fopen 'a'/0/'c:\\refal\\examples\\test.txt'> -->

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения.

#### Функция fputs

ВЫЗОВ:

    <fputs Sn Ee>

где Sn - номер файла (макроцифра от /0/ до /4/),
а Ee - выражение, которое содержит только символы-литеры
и структурные скобки.

ОПИСАНИЕ:

Функция fputs записывает в конец "файла записи" с заданным номером (предварительно
открытый с помощью функции fopen) очередную строку Ee. При этом все
структурные скобки в выражении Ee преобразуются в символы-литеры '(' и
')'. Ели аргумент Ee пуст, в файл добавляется пустая строка.
Если файл не открыт, то открывается на запись файл "REFALX.DAT", где
X - число Sn. Неудачная попытка открытия этого файла приводит к авосту
"Отождествление невозможно" и выдаче сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

    <fputs /0/ 'next string'> -->
    и в конец файла допишется строка 'next string'

#### Функция ftochar

ВЫЗОВ:

    <ftochar Fx>

где Fx - символ-метка.

ОПИСАНИЕ:

Эта функция превращает символ-метку в цепочку объектных символов,
которая является телом символа-метки.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Результатом замены является цепочка объектных символов, являющаяся
телом символа Fx.

ПРИМЕРЫ:

    <ftochar /assa3434/> --> 'ASSA3434'
    <ftochar /ABCD/> --> 'ABCD'

#### Функция functab

ВЫЗОВ:

    <functab Fx>

где Fx - символ-метка.

ОПИСАНИЕ:

В некоторых случаях требуется, чтобы символ-метка, создаваемый из
некоторой цепочки литер заведомо совпадал с символом-меткой,
определенным в РефалАБ-программе и имеющим тело, полностью совпадающее
с данной цепочкой литер. Это достигается с помощью функции functab,
которая регистрирует в таблице символов, создаваемой функцией chartof, указанный
символ-метку Fx. После этого, всякий раз, когда функция chartof будет
получать цепочку литер, совпадающую с телом символа Fx, результатом
функции chartof будет символ Fx.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

Пусть в РефалАБ-программе определена некоторая функция func1. Тогда
 
    <functab /func1/> -->

и в таблице символов функции chartof окажется зарегистрированным символ-метка /FUNC1/.

#### Функция gcd

ВЫЗОВ:

    <gcd (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция gcd предназначена для вычисления наибольшего общего делителя
двух целых чисел E1 и E2. Если E1 и E2 равны нулю, возникает
авост "Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Результатом вызова функции gcd является положительное целое число
(знак '+' не ставитcя), которое является наибольшим общим делителем
чисел E1 и E2.

ПРИМЕРЫ:

    <gcd (/6/) /15/> --> /3/
    <gcd ('-'/6/) /15/> --> /3/
    <gcd (/15/) /1/> --> /1/
    <gcd (/15/) /0/> --> /15/
    <gcd (/15/) > --> /15/

#### Функция Is_Directory_Separator

ВЫЗОВ:

    <Is_Directory_Separator Sd>

где Sd - произвольный символ.

ОПИСАНИЕ:

Функция Is_Directory_Separator определяет принадлежность символа
к символам для разделения уровней папок в строке пути
в текущей среде. Символы для разделения уровней папок
в строке пути:
- Windows - '\\\\', '/';
- POSIX - '/'.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: St

где St - символ-метка:
- St = /TRUE/, если Sd - символ для разделения
уровней папок в строке пути в текущей среде;
- St = /FALSE/, иначе.

ПРИМЕРЫ:

    Среда Windows
    <Is_Directory_Separator '\\'> --> /TRUE/
    <Is_Directory_Separator ';'> --> /FALSE/

    Среда POSIX
    <Is_Directory_Separator '/'> --> /TRUE/
    <Is_Directory_Separator '\\'> --> /FALSE/

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения.

#### Функция Is_White_Space

ВЫЗОВ:

    <Is_White_Space Sw>

где Sw - произвольный символ.

ОПИСАНИЕ:

Функция Is_White_Space проверяет, является ли Sw пробелом.
Пробелы - это ' ', '\n', '\t', '\v', '\f', '\r'.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: St

где St - символ-метка:
- St = /TRUE/, если Sw - пробел;
- St = /FALSE/, иначе.

ПРИМЕРЫ:

    <Is_White_Space '\t'> --> /TRUE/
    <Is_White_Space 'r'> --> /FALSE/

#### Функция last

ВЫЗОВ:

    <last Nn Ee>

где Nn - макроцифра, Ee - произвольное выражение.

ОПИСАНИЕ:

Эта функция предназначена для отщепления от конца выражения Ee части,
имеющей указанную длину Nn в термах нулевого уровня.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Если Ee представляет собой последовательность из менее, чем Nn термов,
результатом замены является

    Ee '*'

Если же длина Ee составляет не менее, чем Nn термов, результатом
замены является

    E1 (E2)

где E1 и E2 - такие выражения, что Ee = E1E2 и при этом E2
является последовательностью ровно из Nn термов.

ПРИМЕРЫ:

    <last /2/ 'A'('B')'C'> --> 'A'(('B')'C')
    <last /5/ 'A'('B')'C'> --> 'A'('B')'C*'

#### Функция lengr

ВЫЗОВ:

    <lengr Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция предназначена для вычисления длины аргумента,
т.е. количества символов и скобок, составляющих Ee.
Если длина превышает 16777215, это приводит к авосту
"Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Nn Ee

где Nn - макроцифра, значение которой равно длине выражения Ee.

ПРИМЕР:

    <lengr 'A' () ('A')> --> /6/ 'A' () ('A')

#### Функции lengw

ВЫЗОВ:

    <lengw Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция lengw выдает длину выражения, измеренную в термах,
т.е. количество термов нулевого уровня, составляющих Ee.
Если длина превышает 16777215, это приводит к авосту
"Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Nn Ee

где Nn - макроцифра, которая равна длине выражения Ee.

ПРИМЕРЫ:

    <lengw 'A' () ('A')> --> /3/ 'A' () ('A')
    <lengw > --> /0/

#### Функция Load_File

ВЫЗОВ:

    <Load_File Sn Ef>

где Sn - номер файла (макроцифра от /0/ до /4/),
Ef - выражение из символов-литер, представляющее собой имя файла
(возможно с указанием пути) и ограничено 254 символами.

ОПИСАНИЕ:

Эта функция открывает файл на чтение и связывает с ним заданный номер
"файла чтения". Далее функция читает все строки из открытого файла.
В конце работы функция закрывает файл. Неудачная попытка открытия файла
приводит к авосту "Отождествление невозможно" и выдаче
сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Ee

где Ee - выражение:
- Ee - пусто, если файл пустой;
- Ee = (E1)...(En), E1...En - строки из файла в виде выражений объектных символов.

ПРИМЕР:

    <Load_File /3/'input.txt'> --> ('первая строка файла')...('последняя строка файла')

#### Функция lrel

ВЫЗОВ:

    <lrel (E1) E2>
    
где E1 и E2 - произвольные объектные выражения.

ОПИСАНИЕ:

Функция lrel лексикографически сравнивает выражения E1 и E2.

В выраженииях E1 и E2 последовательно сравниваются термы нулевого уровня.
Пусть на очередном шаге проверки W1 - терм выражения E1, W2 - терм выражения E2.
Если W1 > W2, то E1 > E2. Если W1 < W2, то E1 < E2. Если W1 = W2,
то происходит переход к следующим термам. Если в одном из выражений больше
нет термов, то, если в другом выражении еще есть термы, то другое выражение
больше, а если в обоих выражениях нет больше термов, то E1 = E2.

Правила сравнения двух термов:
- результат сравнения структурных термов такой же как
результат сравнения выражений внутри этих термов;
- структурный терм больше любого символа;
- символы разных классов сравниваются в следующем порядке:
нестандартный символ > символ-ссылка > символ-число >
символ-метка > символ-литера;
- символы-литеры сравниваются по ихним 8-битным кодам от 0 до 255;
- символы-метки сравниваются по адресам ихних функций;
- символы-числа (макроцифры) сравниваются по ихним целым числам;
- символы-ссылки сравниваются по адресам ихних динамических ящиков;
- нестандартные символы вначале сравниваются по полям tag ихних
звеньев, если поля tag равны, то сравниваются по полям info ихних
звеньев ([п. 3.2](https://github.com/Aleksandr3Bocharov/RefalAB/blob/main/docs/R_3.md#32-%D0%BF%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D1%8B%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9-%D0%B2-%D0%BF%D0%B0%D0%BC%D1%8F%D1%82%D0%B8-%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D1%8B)).

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Sr

где Sr - символ-литера:
- Sr = '>', если E1 > E2;
- Sr = '=', если E1 = E2;
- Sr = '<', если E1 < E2.

ПРИМЕРЫ:

    <lrel ('ab') 'ab'> --> '='
    <lrel ('ac') 'ab'> --> '>'
    <lrel ('abc') 'ab'> --> '>'
    <lrel ('a' /0/) 'ab'> --> '>'
    <lrel ('ab') 'a' ()> --> '<'
    <lrel ('a' ('a')) 'a' ('b')> --> '<'
    <lrel ('a' ('b')) 'a' ('b')> --> '='

#### Функция m1

ВЫЗОВ:

    <m1 Nn>

где Nn - макроцифра.

ОПИСАНИЕ:

Функция m1 производит вычитание единицы из макроцифры. Попытка вычесть
единицу из макроцифры /0/ приводит к авосту "Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: макроцифра, на единицу меньшая Nn.

ПРИМЕРЫ:

    <m1 /10/> --> /9/
    <m1 /738/> --> /737/
    <m1 /1/> --> /0/

#### Функция Map

ВЫЗОВ:

    <Map Wc Ee>

где Wc - терм, являющийся функцией, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция высшего порядка, если Ee не пусто, последовательно применяет
функцию Wc к текущему терму нулевого уровня выражения Ee, начиная с первого.
Результат применения - произвольное объектное выражение Ei, i=1...n (n - количество
термов нулевого уровня выражения Ee). Результат функции - выражение E1...En.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение:
- Er - пусто, если Ee - пусто;
- Er = E1...En.

ПРИМЕРЫ:

    <Map (/add/ (/2/))> -->
    <Map (/add/ (/2/)) /0/ /1/> --> /2/ /3/
    <Map /lengr/ (/1/ /2/) 'r'> --> /4/(/1//2/) /1/'r'

#### Функция Map_Accumulator

ВЫЗОВ:

    <Map_Accumulator Wc Wa Ee>

где Wc - терм, являющийся функцией, Wa - терм, являющийся начальным
значением аккумулятора, Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция высшего порядка является гибридом функций Map и FoldL.
Она, если Ee не пусто, последовательно применяет функцию Wc к терму,
являющимся текущим значением аккумулятора, начиная с начального, и к текущему терму
нулевого уровня выражения Ee, начиная с первого. Результат этого применения -
выражение WiEi, i=1...n (n - количество термов нулевого уровня выражения Ee),
где Wi - терм, который становится новым текущим значением аккумулятора,
Ei - произвольное объектное выражение. Результат функции - выражение WnE1...En.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение:
- Er = Wa, если Ee - пусто;
- Er = WnE1...En.

ПРИМЕРЫ:

    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>) (E1)
    <Map_Accumulator /Add1/ (/1/)> --> (/1/)
    
    поле памяти: Add1 (E1) (E2) = (<add (E1) E2>) (E1)
    <Map_Accumulator /Add1/ (/1/) (/2/) (/1//3/)> --> (/1//6/) (/1/)(/3/)

#### Функция mul

ВЫЗОВ:

    <mul (E1) E2>
    
где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция mul умножает целые числа E1 и E2.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

En - целое число (произведение E1 и E2). Если результат
положителен - знак '+' не ставитcя. Нулевой результат выдается
в виде макроцифры /0/.

ПРИМЕРЫ:

    <mul (/2/) '-'/2/> --> '-'/4/
    <mul (/2/)> --> /0/
    <mul (/4096/)/4096/> --> /1//0/

#### Функция muln

ВЫЗОВ:

    <muln (E1) E2>
    
где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Отличается от mul только тем, что выдает нулевой результат
в виде пустого выражения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Как в mul, только нулевой результат выдается
в виде пустого выражения.

ПРИМЕР:

    <muln () /3/> -->

#### Функция multe

ВЫЗОВ:

    <multe Nn Ee>

где Nn - макроцифра, а Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция копирует (размножает) выражение в заданном количестве
экземпляров.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Ee Ee ... Ee

где выражение Ee повторяется Nn раз. В частности, если Nn равно нулю,
результатом замены является пустое выражение.

ПРИМЕРЫ:

    <multe /5/ 'A'> --> 'AAAAA'
    <multe /2/ 'A'('B')> --> 'A'('B')'A'('B')
    <multe /0/> -->

#### Функция nrel

ВЫЗОВ:

    <nrel (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция nrel предназначена для сравнения целых чисел с учетом знака.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Sr (E1) E2

где Sr - символ-литера:
- Sr = '>', если E1 > E2;
- Sr = '=', если E1 = E2;
- Sr = '<', если E1 < E2.

ПРИМЕРЫ:

    <nrel (/5/)/3/> --> '>' (/5/)/3/
    <nrel ('-'/5/)'-'/3/> --> '<' ('-'/5/)'-'/3/
    <nrel () /0//0/> --> '=' ()/0//0/

#### Функция numb

ВЫЗОВ:

    <numb Ed>

где Ed - цепочка символов-литер, являющаяся десятичной записью целого числа
со знаком или без него, или пустое выражение (воспринимается как нуль).

ОПИСАНИЕ:

Преобразует целое число, не превышающее по абсолютной величине 2147483647,
из символьного представления в макроцифры.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

En - число Ed в виде макроцифр.
Если результат положителен - знак '+' не ставитcя.
Нулевой результат выдается в виде макроцифры /0/.

ПРИМЕРЫ:

    <numb '1000'> --> /1000/
    <numb '-16777216'> --> '-'/1//0/
    <numb > --> /0/
    <numb '1000000000'> --> /59//10144256/
    <numb '+025'> --> /25/

#### Функция p1

ВЫЗОВ:

    <p1 Nn>

где Nn - макроцифра.

ОПИСАНИЕ:

Функция p1 производит прибавление единицы к макроцифре. Попытка прибавить
единицу к макроцифре /16777215/ приводит к авосту "Отождествление невозможно".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: макроцифра, на единицу большая Nn.

ПРИМЕРЫ:

    <p1 /10/> --> /11/
    <p1 /738/> --> /739/

#### Функция Path_Separator

ВЫЗОВ:

    <Path_Separator>

ОПИСАНИЕ:

Функция Path_Separator возвращает символ разделения
каталогов в переменной окружения PATH
в текущей среде.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Sp

где Sp - символ-литера:
- Sp = ';', если среда Windows;
- Sp = ':', если среда POSIX.

ПРИМЕРЫ:

    Среда Windows
    <Path_Separator> --> ';'

    Среда POSIX
    <Path_Separator> --> ':'

#### Функция Platform

ВЫЗОВ:

    <Platform>

ОПИСАНИЕ:

Функция Platform возвращает текущую среду Windows или POSIX.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Sp

где Sp - символ-метка:
- Sp = /WINDOWS/, если среда Windows;
- Sp = /POSIX/, если среда POSIX.

ПРИМЕРЫ:

    Среда Windows
    <Platform> --> /WINDOWS/

    Среда POSIX
    <Platform> --> /POSIX/

#### Функция print

ВЫЗОВ:

    <print Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

В результате выполнения функции print в стандартный выходной поток
(обычно это экран дисплея, но средствами операционной системы можно
переназначить его в некоторый файл), начиная с новой строки,
выводится выражение Ee. Если выражение не помещается в одной печатной строке,
оно продолжается на следующих строках. Печать пустого Ee вызывает пропуск
одной печатной строки. При использовании функции print выражение Ee
выводится следующим образом. Символы-литеры (объектные знаки) выводятся в
виде соответствующих литер. Структурные скобки "(" и ")" выводятся
в виде литер "(" и ")". Составные символы печатаются в том же виде, как они
изображаются в РефалАБ-программах, за исключением того, что в качестве
ограничителей используется не "/", а апостроф "'".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Ee

ПРИМЕР:

    <print 'function'(/f1/)> --> 'function'(/F1/)

и на экране (если вывод не переназначен в какой-либо другой файл при
запуске данной программы) появится:

    function('F1')

#### Функция printm

ВЫЗОВ:

    <printm Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

При использовании функции printm выражение выводится в том же виде,
в котором оно записывается в исходных РефалАБ-программах. Единственное
различие заключается в том, что при переходе на следующую строку
не ставится признак продолжения "+".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Ee

ПРИМЕР:

    <printm 'function'(/f1/)> --> 'function'(/F1/)

и на экране (если вывод не переназначен в какой-либо другой файл
при запуске данной программы) появится:
 
    'function'(/F1/)

#### Функция prout

ВЫЗОВ:

    <prout Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

При использовании функции prout выражение Ee выводится точно так же
как и функцией print.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

    <prout 'this'(/func/)> -->

и на экране (если вывод не переназначен в какой-либо другой файл
при запуске данной программы) появится:

    this('FUNC')

#### Функция proutm

ВЫЗОВ:

    <proutm Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

При использовании функции proutm выражение Ee выводится точно так
же как и функцией printm.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

    <proutm 'this'(/func/)> -->

и на экране (если вывод не переназначен в какой-либо другой файл
при запуске данной программы) появится:

    'this'(/FUNC/)

#### Функция remove_file

ВЫЗОВ:

    <remove_file Ee>

где Ee - выражение из символов-литер, задаюшее имя файла (возможно с указанием пути),
и ограничено 254 символами.

ОПИСАНИЕ:

Указанный файл удаляется. Если процесс удаления завершается с ошибкой,
происходит аварийное завершение программы.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕРЫ:

    <remove_file 'a.a'> -->
    <remove_file 'd:\\test\\a.a'> -->

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения.

#### Функция rename

ВЫЗОВ:

    <rename Ve>

где Ve - непустое выражение из символов-литер, представляет собой
два имени файлов (возможно с указанием пути),
ограниченных 254 символами, разделенных символом '*'. 

ОПИСАНИЕ:

Функция rename копирует файл, заданный первым именем, в файл,
заданный вторым именем с уничтожением первого файла.
Таким образом реализуется либо переименование файла
(если оба имени отсылают к одной и той же директории),
либо перемещение файла из одной директории в другую
с сохранением того же имени или с присвоением файлу другого имени.
Если процесс переименования завершается с ошибкой,
происходит аварийное завершение программы.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕРЫ:

    <rename 'a.a*b.b'> -->
    <rename 'a:\\a.a*b:\\a.a'> -->
    <rename 'd:\\a\\a.a*c:\\f1\\f1.1\\c.c'> -->

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения. 

#### Функция Save_File

ВЫЗОВ:

    <Save_File Sn (Ef) Ee>

где Sn - номер файла (макроцифра от /0/ до /4/),
Ef - выражение из символов-литер, представляющее собой имя файла
(возможно с указанием пути) и ограничено 254 символами,
Ee - выражение (может быть пустым) вида (E1)...(En), E1...En содержат
только символы-литеры и структурные скобки.

ОПИСАНИЕ:

Эта функция открывает файл на запись и связывает с ним заданный номер
"файла записи". Если файл существует, то файл будет перезаписан.
Если файл не существует, то файл будет создан. Далее функция записывает
в файл строки E1...En. При этом все структурные скобки в этих выраженииях
преобразуются в символы-литеры '(' и ')'. Ели любое из этих выражений пусто,
в файл добавляется пустая строка. Если Ee - пусто,
то в файл ничего не записывается и он будет пустым.
В конце работы функция закрывает файл. Неудачная попытка открытия файла
приводит к авосту "Отождествление невозможно" и выдаче
сообщения "can't open file".

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: пусто

ПРИМЕР:

    <Save_File /3/ ('input.txt') ('first string') ('second string')> -->
    и в файл запишутся строки 'first string' и 'second string'

#### Функция Set

ВЫЗОВ:

    <Set Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Эта функция формирует множество термов нулевого уровня
выражения Ee. Т.е. это выражение Ee, но без повторяющихся
термов нулевого уровня.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Es

где Es - выражение Ee, но без повторяющихся
термов нулевого уровня.

ПРИМЕРЫ:

    <Set 'w' (/0/) /1/> --> 'w' (/0/) /1/
    <Set 'w' (/0/) /1/ (/0/)> --> 'w' (/0/) /1/
    
#### Функция sub

ВЫЗОВ:

    <sub (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Функция sub предназначена для вычитания E2 из E1.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Результатом вызова функции sub является целое число (вычитание E2 из E1).
Если результат положителен - знак '+' не ставитcя. Нулевой результат выдается
в виде макроцифры /0/.

ПРИМЕРЫ:

    <sub (/1/) /2/> --> '-' /1/
    <sub (/2/) > --> /2/
    <sub (/1//1/) /2/> --> /16777215/

#### Функция subn

ВЫЗОВ:

    <subn (E1) E2>

где E1 и E2 - целые числа (может быть пустые).

ОПИСАНИЕ:

Отличается от sub только тем, что выдает нулевой результат
в виде пустого выражения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Как в sub, только нулевой результат выдается
в виде пустого выражения.

ПРИМЕР:

    <subn (/0/) > -->

#### Функция symb

ВЫЗОВ:

    <symb En>

где En - целое число в виде цепочки макроцифр (возможно, со знаком) (может быть пустое).

ОПИСАНИЕ:

Преобразует целое число, не превышающее по абсолютной величине 2147483647,
в символьное представление.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Ed - цепочка символов-литер, являющаяся
записью числа En в десятичной системе счисления.
Если число En положительно - знак '+' в Ed не ставитcя.
Нулевой результат изображается как '0'.

ПРИМЕРЫ:

    <symb /1000/> --> '1000'
    <symb '-'/1//0/> --> '-16777216'
    <symb > --> '0'
    <symb /0/> --> '0'
    <symb /59//10144256/> --> '1000000000'
    <symb '-'/0//25/> --> '-25'

#### Функция system

ВЫЗОВ:

    <system Ec>

где Ec - цепочка объектных символов, представляющая команду
операционной системы.

ОПИСАНИЕ:



ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: 

ПРИМЕРЫ:

    <system> -->
    <system> -->

#### Функция time

ВЫЗОВ:

    <time>

ОПИСАНИЕ:

Функция time возвращает текущую дату и время в локали операционной системы.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Цепочка символов-литер, представляющая текущую дату и время в локали операционной системы.

ПРИМЕР:

    <time> --> 'текущая дата и время в локали операционной системы'

#### Функция tm

ВЫЗОВ:

    <tm St>

где St - символ-литера.

Если St - 'S' или 's', секундомер запускается.

Если St - 'G' или 'g', функция возвращает текущее время секундомера.

ОПИСАНИЕ:

Функция tm при вызове запускает секундомер или 
возвращает текущее время секундомера.
Если функция возвращает текущее время секундомера без
предварительного запуска, то время запуска
секундомера 00:00:00 UTC 1 января 1970 года.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

Пусто, если секундомер запускается. Если функция возвращает
текущее время секундомера, то цепочка символов-литер,
представляющая текущее время секундомера.

ПРИМЕРЫ:

    <tm 's'> -->
    <tm 'g'> --> '00:00:00.000000100'

#### Функция Trim

ВЫЗОВ:

    <Trim Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция Trim возвращает выражение Ee, но без пробелов
в начале и в конце этого выражения. Пробелы - это
' ', '\n', '\t', '\v', '\f', '\r'.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение Ee без пробелов в начале и в конце.

ПРИМЕРЫ:

    <Trim 'A'/0/' d'> --> 'A'/0/' d'
    <Trim '\n A'/0/' d\t'> --> 'A'/0/' d'

#### Функция TrimL

ВЫЗОВ:

    <TrimL Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция Trim возвращает выражение Ee, но без пробелов
в начале этого выражения. Пробелы - это
' ', '\n', '\t', '\v', '\f', '\r'.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение Ee без пробелов в начале.

ПРИМЕРЫ:

    <TrimL 'A'/0/' d'> --> 'A'/0/' d'
    <TrimL '\n A'/0/' d'> --> 'A'/0/' d'

#### Функция TrimR

ВЫЗОВ:

    <TrimR Ee>

где Ee - произвольное объектное выражение.

ОПИСАНИЕ:

Функция TrimR возвращает выражение Ee, но без пробелов
в конце этого выражения. Пробелы - это
' ', '\n', '\t', '\v', '\f', '\r'.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ: Er

где Er - выражение Ee без пробелов в конце.

ПРИМЕРЫ:

    <TrimR 'A'/0/' d'> --> 'A'/0/' d'
    <TrimR 'A'/0/' d\t'> --> 'A'/0/' d'

#### Функция try

ВЫЗОВ:

    <try E1>

где E1 - произвольное объектное выражение.

ОПИСАНИЕ:

Выполнение этого вызова происходит следующим образом: создается новое
поле зрения, в которое помещается функциональный терм

    < E1>

После этого делается попытка вычислить этот функциональный терм.
Возможны три исхода этой попытки: нормальный останов, останов
"Отождествление невозможно" и останов "Свободная память исчерпана".
Затем формируется соответствующий результат замены
(возвращаемое значение) и дополнительное поле зрения,
созданное в результате обращения к try, уничтожается.
Можно обращаться к try рекурсивно. В этом случае
образуется стек из полей зрения.

ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ:

В случае нормального останова результатом замены будет выражение

    'N' E2

где E2 - результат вычисления терма < E1>.

В случае останова "Отождествление невозможно" результатом замены
будет выражение

    'R' E3

где E3 - содержимое того функционального терма < E3>,
попытка вычисления которого привела к останову.

В случае останова "Свободная память исчерпана" результатом замены будет выражение

    'S'

ПРИМЕР:

    поле памяти: rev s1 s2 = s2 s1
    <try /rev/ 'ab'> --> 'N' 'ba'
    <try /rev/ 'abc'> --> 'R' /rev/'abc'

### 2.16. Описание пустых функций

Здесь представлены описания пустых функций, расположенных в алфавитном порядке.
Для каждой пустой функции приводится символ-метка, описание и пример.

#### Пустая функция False

СИМВОЛ-МЕТКА:

    /FALSE/

ОПИСАНИЕ:

Является символом-меткой, представляющим логическую ложь.

ПРИМЕР:

    поле памяти:
    Ex /False/ = 'False'
        S0 = 'Not False'
    <Ex /False/> --> 'False'
    <Ex 'f'> --> 'Not False'

#### Пустая функция POSIX

СИМВОЛ-МЕТКА:

    /POSIX/

ОПИСАНИЕ:

Функция Platform возвращает эту функцию в среде POSIX,
применяется совместно с Platform и пустой функцией Windows для написания
программ, по разному ведущих себя в средах Windows и POSIX.

ПРИМЕР:

    Среда POSIX
    поле памяти:
    Ex /Windows/ = 'It is Windows'
        /POSIX/ = 'It is POSIX'
    <Ex <Platform>> --> 'It is POSIX'

#### Пустая функция True

СИМВОЛ-МЕТКА:

    /TRUE/

ОПИСАНИЕ:

Является символом-меткой, представляющим логическую истину.

ПРИМЕР:

    поле памяти:
    Ex /True/ = 'True'
        S0 = 'Not True'
    <Ex /True/> --> 'True'
    <Ex 'f'> --> 'Not True'

#### Пустая функция Windows

СИМВОЛ-МЕТКА:

    /WINDOWS/

ОПИСАНИЕ:

Функция Platform возвращает эту функцию в среде Windows,
применяется совместно с Platform и пустой функцией POSIX для написания
программ, по разному ведущих себя в средах Windows и POSIX.

ПРИМЕР:

    Среда Windows
    поле памяти:
    Ex /Windows/ = 'It is Windows'
        /POSIX/ = 'It is POSIX'
    <Ex <Platform>> --> 'It is Windows'

### 2.17. Описание спецификаторов

Здесь представлены описания спецификаторов, расположенных в алфавитном порядке.
Для каждого спецификатора приводится имя, описание и пример.

#### Спецификатор Directory_Separators

ИМЯ:

    :Directory_Separators:
    
ОПИСАНИЕ:

Спецификатор Directory_Separators определяет множество символов
для разделения уровней папок в строке пути в текущей среде.
Символы для разделения уровней папок в строке пути:
- Windows - '\\\\', '/';
- POSIX - '/'.

ПРИМЕРЫ:

    Среда Windows
    поле памяти:
    Is_Directory_Separator S(:Directory_Separators:)D = /True/
        S0 = /False/
    <Is_Directory_Separator '\\'> --> /TRUE/
    <Is_Directory_Separator ';'> --> /FALSE/

    Среда POSIX
    поле памяти:
    Is_Directory_Separator S(:Directory_Separators:)D = /True/
        S0 = /False/
    <Is_Directory_Separator '/'> --> /TRUE/
    <Is_Directory_Separator '\\'> --> /FALSE/

ЗАМЕЧАНИЕ: обратный слэш изображается путем двукратного
повторения.

#### Спецификатор White_Spaces

ИМЯ:

    :White_Spaces:
    
ОПИСАНИЕ:

Спецификатор White_Spaces определяет множество пробелов.
Пробелы - это ' ', '\n', '\t', '\v', '\f', '\r'.

ПРИМЕР:

    поле памяти:
    Is_White_Space S(:White+Spaces:)W = /True/
        S0 = /False/
    <Is_White_Space '\t'> --> /TRUE/
    <Is_White_Space 'r'> --> /FALSE/
